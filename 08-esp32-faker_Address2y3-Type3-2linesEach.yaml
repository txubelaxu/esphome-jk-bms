<<: !include 08-esp32.yaml

interval:
  - interval: 60s
    then:
      - lambda: |-
          const uint8_t device_info_frame[308] = {0x55 ,0xAA ,0xEB ,0x90 ,0x03 ,0x05 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x41 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x2E ,0x33 ,0x32 ,0x00 ,0x00 ,0x00 ,0x44 ,0xFA ,0xCE ,0x01 ,0x19 ,0x00 ,0x00 ,0x00 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x32 ,0x34 ,0x30 ,0x36 ,0x32 ,0x38 ,0x00 ,0x00 ,0x34 ,0x30 ,0x31 ,0x31 ,0x30 ,0x34 ,0x39 ,0x30 ,0x32 ,0x36 ,0x37 ,0x00 ,0x30 ,0x30 ,0x30 ,0x00 ,0x49 ,0x6E ,0x70 ,0x75 ,0x74 ,0x20 ,0x55 ,0x73 ,0x65 ,0x72 ,0x64 ,0x61 ,0x74 ,0x61 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0xFF ,0xFF ,0xFF ,0x8F ,0xE9 ,0x1D ,0x02 ,0x00 ,0x00 ,0x00 ,0x00 ,0x90 ,0x1F ,0x00 ,0x00 ,0x00 ,0x00 ,0xC0 ,0xD8 ,0xE7 ,0xFE ,0x3F ,0x00 ,0x00 ,0x01 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0x04 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x09 ,0x08 ,0x00 ,0x01 ,0x64 ,0x00 ,0x00 ,0x00 ,0x5F ,0x00 ,0x00 ,0x00 ,0x3C ,0x00 ,0x00 ,0x00 ,0x32 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x10 ,0x0E ,0x00 ,0x00 ,0x14 ,0x32 ,0x01 ,0x1E ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0x9F ,0xE9 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x21 ,0x02 ,0x10 ,0x16 ,0x1C ,0x00 ,0x01 ,0xC4 ,0x74};

          // Convierte el array C a std::vector<uint8_t>
          std::vector<uint8_t> simulated_bms_frame_vector_device_info_frame(
              device_info_frame,
              device_info_frame + sizeof(device_info_frame)
          );

          // Valores de ejemplo para los nuevos parámetros
          const uint8_t origin_address = 0x02; // O el que corresponda a tu simulación
          #//const uint8_t frame_type_1 = 0x01;     // 0x01 => device_info_frame 
          const uint8_t frame_type = device_info_frame[4];
          const std::string nodes_info = "simulated_node01"; // O cualquier string descriptivo

          id(bms1).on_jk_rs485_sniffer_data(origin_address, frame_type, simulated_bms_frame_vector_device_info_frame, nodes_info);

      - delay: 10s

      - lambda: |-
          const uint8_t device_info_frame[308] = {0x55 ,0xAA ,0xEB ,0x90 ,0x03 ,0x05 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x41 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x2E ,0x33 ,0x32 ,0x00 ,0x00 ,0x00 ,0x44 ,0xFA ,0xCE ,0x01 ,0x19 ,0x00 ,0x00 ,0x00 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x32 ,0x34 ,0x30 ,0x36 ,0x32 ,0x38 ,0x00 ,0x00 ,0x34 ,0x30 ,0x31 ,0x31 ,0x30 ,0x34 ,0x39 ,0x30 ,0x32 ,0x36 ,0x37 ,0x00 ,0x30 ,0x30 ,0x30 ,0x00 ,0x49 ,0x6E ,0x70 ,0x75 ,0x74 ,0x20 ,0x55 ,0x73 ,0x65 ,0x72 ,0x64 ,0x61 ,0x74 ,0x61 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0xFF ,0xFF ,0xFF ,0x8F ,0xE9 ,0x1D ,0x02 ,0x00 ,0x00 ,0x00 ,0x00 ,0x90 ,0x1F ,0x00 ,0x00 ,0x00 ,0x00 ,0xC0 ,0xD8 ,0xE7 ,0xFE ,0x3F ,0x00 ,0x00 ,0x01 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0x04 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x09 ,0x08 ,0x00 ,0x01 ,0x64 ,0x00 ,0x00 ,0x00 ,0x5F ,0x00 ,0x00 ,0x00 ,0x3C ,0x00 ,0x00 ,0x00 ,0x32 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x10 ,0x0E ,0x00 ,0x00 ,0x14 ,0x32 ,0x01 ,0x1E ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0x9F ,0xE9 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x21 ,0x02 ,0x10 ,0x16 ,0x1C ,0x00 ,0x01 ,0xC4 ,0x74};

          // Convierte el array C a std::vector<uint8_t>
          std::vector<uint8_t> simulated_bms_frame_vector_device_info_frame(
              device_info_frame,
              device_info_frame + sizeof(device_info_frame)
          );

          // Valores de ejemplo para los nuevos parámetros
          const uint8_t origin_address = 0x03; // O el que corresponda a tu simulación
          #//const uint8_t frame_type_1 = 0x01;     // 0x01 => device_info_frame 
          const uint8_t frame_type = device_info_frame[4];
          const std::string nodes_info = "simulated_node01"; // O cualquier string descriptivo

          id(bms2).on_jk_rs485_sniffer_data(origin_address, frame_type, simulated_bms_frame_vector_device_info_frame, nodes_info);

      - delay: 10s

      - lambda: |-
          const uint8_t device_info_frame[308] = {0x55 ,0xAA ,0xEB ,0x90 ,0x03 ,0x05 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x41 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x2E ,0x33 ,0x32 ,0x00 ,0x00 ,0x00 ,0xEC ,0x66 ,0x52 ,0x00 ,0x04 ,0x00 ,0x00 ,0x00 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x32 ,0x35 ,0x30 ,0x34 ,0x31 ,0x35 ,0x00 ,0x00 ,0x34 ,0x30 ,0x31 ,0x31 ,0x30 ,0x34 ,0x39 ,0x30 ,0x34 ,0x33 ,0x31 ,0x00 ,0x30 ,0x30 ,0x30 ,0x00 ,0x49 ,0x6E ,0x70 ,0x75 ,0x74 ,0x20 ,0x55 ,0x73 ,0x65 ,0x72 ,0x64 ,0x61 ,0x74 ,0x61 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0xFF ,0xFF ,0xFF ,0x8F ,0xE9 ,0x1D ,0x02 ,0x00 ,0x00 ,0x00 ,0x00 ,0x90 ,0x1F ,0x00 ,0x00 ,0x00 ,0x00 ,0xC0 ,0xD8 ,0xE7 ,0xFE ,0x3F ,0x00 ,0x00 ,0x01 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x04 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x09 ,0x08 ,0x00 ,0x01 ,0x64 ,0x00 ,0x00 ,0x00 ,0x5F ,0x00 ,0x00 ,0x00 ,0x3C ,0x00 ,0x00 ,0x00 ,0x32 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x10 ,0x0E ,0x00 ,0x00 ,0x32 ,0x32 ,0x01 ,0x1E ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0x9F ,0xE9 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xB4 ,0x03 ,0x10 ,0x16 ,0x1C ,0x00 ,0x01 ,0xC5 ,0xA5};

          // Convierte el array C a std::vector<uint8_t>
          std::vector<uint8_t> simulated_bms_frame_vector_device_info_frame(
              device_info_frame,
              device_info_frame + sizeof(device_info_frame)
          );

          // Valores de ejemplo para los nuevos parámetros
          const uint8_t origin_address_2 = 0x02; // O el que corresponda a tu simulación

          # //const uint8_t frame_type_2 = 0x02;     // 0x02 => device_info_frame
          const uint8_t frame_type = device_info_frame[4];
          const std::string nodes_info = "simulated_node02"; // O cualquier string descriptivo

          id(bms1).on_jk_rs485_sniffer_data(origin_address_2, frame_type, simulated_bms_frame_vector_device_info_frame, nodes_info);

      - delay: 10s

      - lambda: |-
          const uint8_t device_info_frame[308] = {0x55 ,0xAA ,0xEB ,0x90 ,0x03 ,0x05 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x41 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x31 ,0x35 ,0x2E ,0x33 ,0x32 ,0x00 ,0x00 ,0x00 ,0xEC ,0x66 ,0x52 ,0x00 ,0x04 ,0x00 ,0x00 ,0x00 ,0x4A ,0x4B ,0x5F ,0x50 ,0x42 ,0x32 ,0x41 ,0x31 ,0x36 ,0x53 ,0x32 ,0x30 ,0x50 ,0x00 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x32 ,0x35 ,0x30 ,0x34 ,0x31 ,0x35 ,0x00 ,0x00 ,0x34 ,0x30 ,0x31 ,0x31 ,0x30 ,0x34 ,0x39 ,0x30 ,0x34 ,0x33 ,0x31 ,0x00 ,0x30 ,0x30 ,0x30 ,0x00 ,0x49 ,0x6E ,0x70 ,0x75 ,0x74 ,0x20 ,0x55 ,0x73 ,0x65 ,0x72 ,0x64 ,0x61 ,0x74 ,0x61 ,0x00 ,0x00 ,0x30 ,0x30 ,0x35 ,0x38 ,0x35 ,0x39 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0xFF ,0xFF ,0xFF ,0x8F ,0xE9 ,0x1D ,0x02 ,0x00 ,0x00 ,0x00 ,0x00 ,0x90 ,0x1F ,0x00 ,0x00 ,0x00 ,0x00 ,0xC0 ,0xD8 ,0xE7 ,0xFE ,0x3F ,0x00 ,0x00 ,0x01 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x04 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0xFF ,0x67 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x09 ,0x08 ,0x00 ,0x01 ,0x64 ,0x00 ,0x00 ,0x00 ,0x5F ,0x00 ,0x00 ,0x00 ,0x3C ,0x00 ,0x00 ,0x00 ,0x32 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x10 ,0x0E ,0x00 ,0x00 ,0x32 ,0x32 ,0x01 ,0x1E ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xFE ,0x9F ,0xE9 ,0xFF ,0x0F ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0xB4 ,0x03 ,0x10 ,0x16 ,0x1C ,0x00 ,0x01 ,0xC5 ,0xA5};

          // Convierte el array C a std::vector<uint8_t>
          std::vector<uint8_t> simulated_bms_frame_vector_device_info_frame(
              device_info_frame,
              device_info_frame + sizeof(device_info_frame)
          );

          // Valores de ejemplo para los nuevos parámetros
          const uint8_t origin_address_2 = 0x03; // O el que corresponda a tu simulación

          # //const uint8_t frame_type_2 = 0x02;     // 0x02 => device_info_frame
          const uint8_t frame_type = device_info_frame[4];
          const std::string nodes_info = "simulated_node02"; // O cualquier string descriptivo

          id(bms2).on_jk_rs485_sniffer_data(origin_address_2, frame_type, simulated_bms_frame_vector_device_info_frame, nodes_info);

      - delay: 10s
